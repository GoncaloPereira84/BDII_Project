{% load static %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

  <title>{% block title %}{% endblock %}</title>


  <meta name="description"
    content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
  <meta name="author" content="pixelcave">
  <meta name="robots" content="noindex, nofollow">

  <meta property="og:title" content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework">
  <meta property="og:site_name" content="Dashmix">
  <meta property="og:description"
    content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">
  <meta property="og:image" content="">
  <link rel="shortcut icon" href="{% static 'assets/media/favicons/favicon.png'%}">
  <link rel="icon" type="image/png" sizes="192x192" href="{% static 'assets/media/favicons/favicon-192x192.png'%}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/media/favicons/apple-touch-icon-180x180.png'%}">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" id="css-main" href="{% static 'assets/css/dashmix.min.css'%}">
  <link rel="stylesheet" id="css-theme" href="{% static 'assets/css/themes/xwork.min.css'%}">
  {% block links %}{% endblock %}

</head>

<body>
  <main id="main-container">
    <div id="page-container"
      class="enable-page-overlay side-scroll page-header-dark page-header-glass main-content-boxed">
      <!-- Side Overlay-->
      <aside id="side-overlay">
        <!-- Side Header -->
        <div class="bg-primary">
          <div class="content-header">
            <!-- User Avatar -->
            {% if request.session.id_utilizador %}
            <button type="button" class="btn btn-alt-secondary" id="page-header-user-dropdown" data-bs-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-fw fa-user d-sm-none"></i>
              <span class="d-none d-sm-inline-block">{{ request.session.nome }}</span>
              <i class="fa fa-fw fa-angle-down opacity-50 ms-1 d-none d-sm-inline-block"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-end p-0" aria-labelledby="page-header-user-dropdown">
              <div class="bg-primary-dark rounded-top fw-semibold text-white text-center p-3">
                User Options
              </div>
              <div class="p-2">
                <a class="dropdown-item" href="be_pages_generic_profile.html">
                  <i class="far fa-fw fa-user me-1"></i> Profile
                </a>
                <a class="dropdown-item d-flex align-items-center justify-content-between"
                  href="be_pages_generic_inbox.html">
                  <span><i class="far fa-fw fa-envelope me-1"></i> Inbox</span>
                  <span class="badge bg-primary rounded-pill">3</span>
                </a>
                <a class="dropdown-item" href="be_pages_generic_invoice.html">
                  <i class="far fa-fw fa-file-alt me-1"></i> Invoices
                </a>
                <div role="separator" class="dropdown-divider"></div>

                <!-- Toggle Side Overlay -->
                <!-- Layout API, functionality initialized in Template._uiApiLayout() -->
                <a class="dropdown-item" href="javascript:void(0)" data-toggle="layout"
                  data-action="side_overlay_toggle">
                  <i class="far fa-fw fa-building me-1"></i> Settings
                </a>
                <!-- END Side Overlay -->

                <div role="separator" class="dropdown-divider"></div>
                <a class="dropdown-item" href="/logout">
                  <i class="far fa-fw fa-arrow-alt-circle-left me-1"></i> Sign Out
                </a>
              </div>
            </div>
            {% else %}
            <button type="button" class="btn btn-alt-secondary" id="page-header-user-dropdown" data-bs-toggle="modal"
              data-bs-target="#loginModal">
              <i class="fa fa-fw fa-user d-sm-none"></i>
              <span class="d-none d-sm-inline-block">Iniciar Sessão</span>
            </button>
            {% endif %}
            <!-- END User Info -->

            <!-- Close Side Overlay -->
            <!-- Layout API, functionality initialized in Template._uiApiLayout() -->
            <a class="ms-auto text-white" href="javascript:void(0)" data-toggle="layout"
              data-action="side_overlay_close">
              <i class="fa fa-times-circle"></i>
            </a>
            <!-- END Close Side Overlay -->
          </div>
        </div>
        <!-- END Side Header -->

        <!-- Side Navigation -->
        <div class="content-side content-side-full">
          <ul class="nav-main">
            <li class="nav-main-item">
              <a class="nav-main-link active" href="/dashboard/">
                <i class="nav-main-link-icon fa fa-coffee"></i>
                <span class="nav-main-link-name">Dashboard</span>
              </a>
            </li>
            <li class="nav-main-heading">Pages</li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-rocket"></i>
                <span class="nav-main-link-name">Features</span>
              </a>
            </li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-shopping-bag"></i>
                <span class="nav-main-link-name">Pricing</span>
              </a>
            </li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-check"></i>
                <span class="nav-main-link-name">Plans</span>
              </a>
            </li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-life-ring"></i>
                <span class="nav-main-link-name">Support</span>
              </a>
            </li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-envelope"></i>
                <span class="nav-main-link-name">Contact</span>
              </a>
            </li>
            <li class="nav-main-heading">More</li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-user"></i>
                <span class="nav-main-link-name">Account</span>
              </a>
            </li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="">
                <i class="nav-main-link-icon fa fa-cog"></i>
                <span class="nav-main-link-name">Settings</span>
              </a>
            </li>
            <li class="nav-main-heading">Dashboards</li>
            <li class="nav-main-item">
              <a class="nav-main-link" href="be_pages_dashboard_all.html">
                <i class="nav-main-link-icon fa fa-arrow-left"></i>
                <span class="nav-main-link-name">Go Back</span>
              </a>
            </li>
          </ul>
        </div>
        <!-- END Side Navigation -->
      </aside>
      <header id="page-header">
        <div class="content-header">
          <div>
            <a class="fw-semibold tracking-wide" style="color: black;" href="index.html">
              BDTech
            </a>
          </div>
          <div>
            <button type="button" class="btn btn-sm btn-alt-secondary" data-toggle="layout"
              data-action="header_search_on">
              <i class="fa fa-fw fa-search"></i>
            </button>
            <button type="button" class="btn btn-sm btn-alt-secondary" data-toggle="layout"
              data-action="side_overlay_toggle">
              <i class="fa fa-fw fa-bars"></i>
            </button>
          </div>
        </div>
        <div id="page-header-search" class="overlay-header bg-header-dark">
          <div class="content-header">
            <form class="w-100" action="be_pages_generic_search.html" method="POST">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Search or hit ESC.." id="page-header-search-input"
                  name="page-header-search-input">
                <button type="button" class="btn btn-alt-secondary" data-toggle="layout"
                  data-action="header_search_off">
                  <i class="fa fa-fw fa-times-circle"></i>
                </button>
              </div>
            </form>
          </div>
        </div>

        <div id="page-header-loader" class="overlay-header bg-header-dark">
          <div class="content-header">
            <div class="w-100 text-center">
              <i class="fa fa-fw fa-2x fa-sun fa-spin"></i>
            </div>
          </div>
        </div>
      </header>
      <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered h-100">
          <div class="modal-content border-0 bg-transparent h-100">
            <div class="hero-static d-flex align-items-center p-2 px-sm-0 h-100">
              <div class="block block-rounded block-transparent w-100 overflow-hidden bg-image"
                style="background-image: url('{% static '/assets/media/photos/photo20@2x.jpg' %}');">
                <div class="order-md-1 bg-body-extra-light">
                  <div class="block-content block-content-full px-lg-5 py-md-5 py-lg-6">
                    <div class="mb-2 text-center">
                      <a class="link-fx fw-bold fs-1" href="index.html">
                        <span class="text-dark">BD</span><span class="text-primary">Tech</span>
                      </a>
                      <p class="text-uppercase fw-bold fs-sm text-muted">Sign In</p>
                    </div>
                    <form action="/login/" method="POST" id="loginForm">
                      {% csrf_token %}
                      <div class="mb-3">
                        <input type="text" class="form-control form-control-alt" id="login-username"
                          name="login-username" placeholder="Username" required>
                      </div>
                      <div class="mb-4">
                        <input type="password" class="form-control form-control-alt" id="login-password"
                          name="login-password" placeholder="Password" required>
                      </div>
                      <div class="mb-4">
                        <button type="submit" class="btn w-100 btn-hero btn-primary">
                          <i class="fa fa-fw fa-sign-in-alt opacity-50 me-1"></i> Sign In
                        </button>
                        <div class="alert alert-danger text-center" role="alert" id="email-error-message" style="display: none;">
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


      <div class="content">

        {% block content %}
        {% endblock %}
      </div>
  </main>


  <footer id="page-footer" class="bg-body-light">
    <div class="content py-0">
      <div class="row fs-sm">
        <div class="col-sm-6 order-sm-2 mb-1 mb-sm-0 text-center text-sm-end">
          Crafted with <i class="fa fa-heart text-danger"></i> by <a class="fw-semibold"
            href="https://1.envato.market/ydb" target="_blank">pixelcave</a>
        </div>
        <div class="col-sm-6 order-sm-1 text-center text-sm-start">
          <a class="fw-semibold" href="https://1.envato.market/r6y" target="_blank">Dashmix 5.1</a> &copy; <span
            data-toggle="year-copy"></span>
        </div>
      </div>
    </div>
  </footer>
  <!-- END Footer -->
  </div>
  <script src="{% static 'assets/js/dashmix.app.min.js'%}"></script>

  <!-- jQuery (required for jQuery Sparkline plugin) -->
  <script src="{% static 'assets/js/lib/jquery.min.js'%}"></script>

  <!-- Page JS Plugins -->
  <script src="{% static 'assets/js/plugins/jquery-sparkline/jquery.sparkline.min.js'%}"></script>

  <!-- Page JS Helpers (jQuery Sparkline Plugin) -->
  <script>Dashmix.helpersOnLoad('jq-sparkline');</script>

  <script>
    $(document).ready(function () {
      $('#loginForm').submit(function (e) {
        e.preventDefault();
  
        $.ajax({
          type: 'POST',
          url: '/login/',
          data: $('#loginForm').serialize(),
          success: function (data) {
            if (data.success) {
              // Credenciais corretas, redirecionar para a página desejada
              window.location.href = data.redirect;
            } else {
              var errorMessage = '<strong>' + data.message + '</strong>';
              $('#email-error-message').html(data.message);
              $('#email-error-message').fadeIn().css('opacity', 1);
            }
          },
          error: function () {
            // Lidar com erros de requisição
            alert('Error processing the request.');
          }
        });
      });
    });
  </script>
  

  <!--load scripts-->
  {% block scripts %}
  {% endblock %}

</body>

</html>